{
    "collab_server" : "",
    "contents" : "\n#' Create the Data_Geostat dataframe for vast, based on RACE survey data\n#'\n#' @param species.codes vector of species codes for which data will be returned\n#' @param lat_lon.def string defining how tow-specific Latitude and Longitude will be calculated\n#' @param area string indicating area of survey interest: GOA, AI\n#'\n#' @return dataframe Data_Geostat with input data for VAST\n#' @export\ncreate_Data_Geostat <- function(species.codes, lat_lon.def=\"mean\", area=\"GOA\") {\n  #TESTING\n  # species.codes <- c(30152,30420)\n  # lat_lon.def <- \"mean\"\n  \n  source(\"R/load-RACE-data.r\")\n  \n  #Check Inputs\n  if(!lat_lon.def %in% c(\"mean\", \"start\", \"end\")) { stop(\"lat_lon.def must be mean, start, or end\") }\n  \n  #Get Data\n  load.data <- load_RACE_data(species.codes=species.codes, area=area)\n  \n  #Create VAST input data object\n  Data_Geostat <- NULL\n  #List Species, if multispecies\n  if(length(species.codes) > 1) {\n    Data_Geostat$spp <- load.data$Common.Name\n  }\n  Data_Geostat$Catch_KG <- load.data$WEIGHT  \n  Data_Geostat$Year <- load.data$Year \n  Data_Geostat$Vessel <- load.data$VESSEL.x\n  Data_Geostat$AreaSwept_km2 <- load.data$effort\n  \n  #Define Lat and Lon\n  if(lat_lon.def==\"start\") {\n    Data_Geostat$Lat <- load.data$START_LATITUDE\n    Data_Geostat$Lon <- load.data$START_LONGITUDE\n  }\n  if(lat_lon.def==\"end\") {\n    Data_Geostat$Lat <- load.data$END_LATITUDE\n    Data_Geostat$Lon <- load.data$END_LONGITUDE\n  }\n  if(lat_lon.def==\"mean\") {\n    Data_Geostat$Lat <- rowMeans(cbind(load.data$START_LATITUDE, load.data$END_LATITUDE), na.rm=TRUE)\n    Data_Geostat$Lon <- rowMeans(cbind(load.data$START_LONGITUDE, load.data$END_LONGITUDE), na.rm=TRUE)\n  }\n  \n  #Convert to data frame\n  Data_Geostat <- data.frame(Data_Geostat)\n  return(Data_Geostat)\n}\n",
    "created" : 1490663310804.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "681224575",
    "id" : "61A52E70",
    "lastKnownWriteTime" : 1490734702,
    "last_content_update" : 1490745115534,
    "path" : "~/Projects/VAST Evaluation/AFSC_VAST_Evaluation/R/create-Data-Geostat.r",
    "project_path" : "R/create-Data-Geostat.r",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 2,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}